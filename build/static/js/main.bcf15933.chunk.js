(this["webpackJsonpcraigslist-explorer"]=this["webpackJsonpcraigslist-explorer"]||[]).push([[0],{179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},234:function(e,t){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},257:function(e,t){},259:function(e,t){},269:function(e,t){},271:function(e,t){},298:function(e,t){},300:function(e,t){},301:function(e,t){},306:function(e,t){},308:function(e,t){},327:function(e,t){},339:function(e,t){},342:function(e,t){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),s=n.n(c),i=n(39),o=n.n(i),r=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,357)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))},l=n(2),d=n(17),j=n(10),u={development:{api:"https://webdev-craigslist-exporer-back.herokuapp.com"},production:{api:"https://webdev-craigslist-exporer-back.herokuapp.com"}},b=u,O=n(18),h=n.n(O),m=n(40),p=(n(179),n(180),"300x300"),f="600x450",x=function(e,t){return"https://images.craigslist.org/".concat(e,"_").concat(t,".jpg")},g=n(152),v=function(e){return g(e).format("MMM D")},N=(n(181),function(e){return Object(a.jsxs)(d.b,{className:"post-container",to:{pathname:"/post/"+e.post._id,state:{postId:e.post._id,post:e.post}},children:[Object(a.jsx)("div",{className:e.post.images.length>0?"image":"no-image",style:{backgroundImage:e.post.images.length>0?"url(".concat(x(e.post.images[0],p),")"):""},children:e.post.images.length>0?"":"No image available"}),Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)("div",{className:"title",children:e.post.title}),Object(a.jsxs)("div",{className:"extra-info",children:[Object(a.jsx)("div",{className:"date",children:v(e.post.date)}),Object(a.jsxs)("div",{className:"bedrooms",children:[e.post.bedrooms?e.post.bedrooms:"N/A"," BR,"]}),Object(a.jsxs)("div",{className:"area",children:[e.post.area?e.post.area:"N/A"," ft\xb2,"]}),Object(a.jsx)("div",{className:"city",children:e.post.neighborhood.join(" ")})]})]}),Object(a.jsxs)("div",{className:"price",children:["$ ",e.post.price]})]})});var S=function(e){var t=e.posts.map((function(e,t){return Object(a.jsx)(N,{post:e},e._id||t)}));return Object(a.jsx)(s.a.Fragment,{children:t})},w=n(53),C=n.n(w),y=(n(208),function(e){var t=Object(c.useState)("off"),n=Object(l.a)(t,2),s=n[0],i=n[1];Object(c.useEffect)((function(){e.enabled?o(!0):o(!1)}),[e.enabled]);var o=function(e){i(e?"on":"off")};return Object(a.jsx)("div",{className:"toggle",children:Object(a.jsx)("div",{onClick:function(){return e.update("on"!==s)},className:"SwitchControl "+s,children:Object(a.jsx)("div",{className:"SwitchControl--slider",children:Object(a.jsx)("div",{className:"SwitchControl--knob"})})})})}),k=(n(209),function(e){var t=Object(c.useState)(1),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(9999),r=Object(l.a)(o,2),d=r[0],j=r[1],u=Object(c.useState)("1"),b=Object(l.a)(u,2),O=b[0],h=b[1],m=Object(c.useState)(100),p=Object(l.a)(m,2),f=p[0],x=p[1],g=Object(c.useState)(!1),v=Object(l.a)(g,2),N=v[0],S=v[1],w=Object(c.useState)({}),C=Object(l.a)(w,2),k=C[0],E=C[1];Object(c.useEffect)((function(){var t={minPrice:s,maxPrice:d,bedrooms:O,area:f};k.minPrice?function(e,t){return e.minPrice===t.minPrice&&e.maxPrice===t.maxPrice&&e.bedrooms===t.bedrooms&&e.area===t.area}(k,t)||(S(!0),E(t),e.updateFilter(t)):E(t)}),[s,d,O,f,k,e]);return Object(a.jsxs)("div",{className:"filter",children:[Object(a.jsxs)("div",{className:"toggle-wrapper",children:["Search Filter",Object(a.jsx)(y,{enabled:N,update:function(t){S(t),t?e.updateFilter({minPrice:s,maxPrice:d,bedrooms:O,area:f}):e.updateFilter({})}})]}),Object(a.jsxs)("div",{className:"price",children:["$",Object(a.jsx)("input",{"aria-label":"Minimum price filter",onChange:function(e){return i(e.target.value)},min:"1",max:"9999",type:"number",value:s})," -  $",Object(a.jsx)("input",{"aria-label":"Maximum price filter",onChange:function(e){return j(e.target.value)},min:"1",max:"9999",type:"number",value:d})," ",Object(a.jsx)("span",{children:"Rent"})]}),Object(a.jsxs)("div",{className:"bedrooms",children:[Object(a.jsxs)("select",{"aria-label":"Option menu for minimum amount of bedrooms",value:O,onChange:function(e){return h(e.target.value)},name:"bedrooms",children:[Object(a.jsx)("option",{value:"1",children:"+1"}),Object(a.jsx)("option",{value:"2",children:"+2"}),Object(a.jsx)("option",{value:"3",children:"+3"}),Object(a.jsx)("option",{value:"4",children:"+4"}),Object(a.jsx)("option",{value:"5",children:"+5"}),Object(a.jsx)("option",{value:"6",children:"+6"})]}),Object(a.jsx)("span",{children:"BR"})]}),Object(a.jsxs)("div",{className:"area",children:["+ ",Object(a.jsx)("input",{"aria-label":"Minimum area filter",max:"9999",step:"50",onChange:function(e){return x(e.target.value)},min:"1",type:"number",value:f}),Object(a.jsx)("span",{children:"ft\xb2"})]}),Object(a.jsx)("div",{className:"minimize",children:Object(a.jsx)("span",{children:"^"})})]})}),E=(n(210),function(e){var t=Object(c.useState)("10"),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)("date"),r=Object(l.a)(o,2),d=r[0],j=r[1],u=Object(c.useState)("asc"),b=Object(l.a)(u,2),O=b[0],h=b[1],m=Object(c.useState)({}),p=Object(l.a)(m,2),f=p[0],x=p[1];return Object(c.useEffect)((function(){var t={amount:s,sortBy:d,sortOrder:O};f.amount?function(e,t){return e.amount===t.amount&&e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(f,t)||(x(t),e.updateSorting(t)):x(t)}),[s,d,O,f,e]),Object(a.jsxs)("div",{className:"sort",children:[Object(a.jsxs)("div",{className:"amount",children:[Object(a.jsxs)("select",{"aria-label":"Option menu for items to show in feed",value:s,onChange:function(e){return i(e.target.value)},name:"amount",children:[Object(a.jsx)("option",{value:"10",children:"10"}),Object(a.jsx)("option",{value:"20",children:"20"}),Object(a.jsx)("option",{value:"40",children:"40"}),Object(a.jsx)("option",{value:"60",children:"60"}),Object(a.jsx)("option",{value:"80",children:"80"}),Object(a.jsx)("option",{value:"100",children:"100"})]}),Object(a.jsx)("span",{children:"\ud80c\udc79"})]}),Object(a.jsxs)("div",{className:"sort-by",children:[Object(a.jsx)("span",{children:"Sort by"}),Object(a.jsxs)("select",{"aria-label":"Option menu to pick sort-by value",value:d,onChange:function(e){return j(e.target.value)},name:"amount",children:[Object(a.jsx)("option",{value:"date",children:"date"}),Object(a.jsx)("option",{value:"price",children:"price"}),Object(a.jsx)("option",{value:"bedrooms",children:"bedrooms"}),Object(a.jsx)("option",{value:"area",children:"area"})]})]}),Object(a.jsxs)("div",{className:"asc-desc",children:[Object(a.jsx)("span",{className:"asc"===O?"active":"",onClick:function(){return h("asc")},children:"asc \u2191"}),Object(a.jsx)("span",{children:"|"}),Object(a.jsx)("span",{className:"desc"===O?"active":"",onClick:function(){return h("desc")},children:"desc \u2193"})]})]})}),F=n(154),I=n.n(F),P=function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(0),r=Object(l.a)(o,2),d=r[0],j=r[1],u=Object(c.useState)(!1),O=Object(l.a)(u,2),m=O[0],p=O[1],f=Object(c.useState)(0),x=Object(l.a)(f,2),g=x[0],v=x[1],N=Object(c.useState)({}),w=Object(l.a)(N,2),y=w[0],F=w[1],P=Object(c.useState)({}),A=Object(l.a)(P,2),L=A[0],M=A[1],_=Object(c.useCallback)((function(){p(!1),function(e,t,n,a){var c=encodeURIComponent(JSON.stringify(e)),s=encodeURIComponent(JSON.stringify(t));return h.a.get("".concat(b.production.api,"/posts/all?page=").concat(n,"&filter=").concat(c,"&sort=").concat(s,"&neighborhood=").concat(a))}(y,L,g,e.neighborhood?e.neighborhood:"").then((function(e){e.data.total?j(e.data.total):j(0),e.data.posts?i(e.data.posts):i([]),p(!0)})).catch((function(e){console.error("Failed to get all threads",e)}))}),[g,y,L,e.neighborhood]);return Object(c.useEffect)((function(){v(0)}),[y,L]),Object(c.useEffect)(_,[y,L,g,_]),Object(c.useEffect)((function(){_(),e.postLoaded&&e.postLoaded(null)}),[e,_]),Object(a.jsxs)("div",{className:"feed",children:[Object(a.jsx)(k,{updateFilter:F}),Object(a.jsxs)("div",{className:"feed-smaller",children:[Object(a.jsx)(E,{updateSorting:M}),m?Object(a.jsx)(S,{posts:s}):Object(a.jsx)(C.a,{type:"Puff",color:"#005edc",height:100,width:100,className:"loader"})]}),Object(a.jsx)(I.a,{previousLabel:"\u2190 Previous",nextLabel:"Next \u2192",pageCount:Math.ceil(d/(L&&L.amount?L.amount:10)),onPageChange:function(e){var t=e.selected;return v(t)},containerClassName:"pagination",previousLinkClassName:"pagination__link",nextLinkClassName:"pagination__link",disabledClassName:"pagination__link--disabled",activeClassName:"pagination__link--active"})]})},A=function(){return Object(a.jsx)("h3",{children:"Url not found."})},L=n(157),M=n(155),_=n.n(M),R=n(355),z=n(351),B=n(352),U=n(353),H=n(356),K=n(354),T=(n(250),function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(void 0),r=Object(l.a)(o,2),d=r[0],j=r[1],u=Object(c.useState)(void 0),O=Object(l.a)(u,2),m=O[0],p=O[1];Object(c.useEffect)((function(){p(e.postId)}),[e.postId]);return Object(a.jsxs)("div",{id:e.id,className:"new-annotation",children:[Object(a.jsx)("h3",{children:"Add Annotation:"}),Object(a.jsx)("textarea",{id:"message",alt:"message",name:"message","aria-label":"New annotation message",value:s,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)("button",{"aria-label":"Add Annotation to post",onClick:function(){(function(e){return h.a.post(b.production.api+"/annotation/add",e,{withCredentials:!0,timeout:1e4})})({postId:m,message:s}).then((function(t){200===t.status?(e.success(t.data),i("")):202===t.status&&j(t.data)})).catch((function(e){console.error(e)}))},children:"Submit"}),Object(a.jsx)("div",{children:d||""})]})}),q=(n(251),function(e){return Object(a.jsxs)("div",{className:"annotation-item",children:[Object(a.jsx)("div",{className:"date",children:v(e.annotation.date)}),Object(a.jsx)("div",{className:"message",children:e.annotation.message})]})});var D=function(e){var t=e.annotations.map((function(e,t){return Object(a.jsx)(q,{annotation:e},e._id||t)}));return Object(a.jsx)(s.a.Fragment,{children:t})},J=function(e){return Object(a.jsx)(s.a.Fragment,{children:e.center?Object(a.jsxs)(m.b,{mapContainerStyle:{height:"100%",width:"100%"},zoom:e.zoom||14,center:e.center,children:[e.circle?Object(a.jsx)(m.a,{center:e.center,radius:e.circleRadius,options:{strokeColor:"#005edc",strokeOpacity:.8,strokeWeight:2,fillColor:"#005edc",fillOpacity:.35,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1}}):"",e.rectangle?Object(a.jsx)(m.d,{bounds:{north:e.bounds.northeast.lat,south:e.bounds.southwest.lat,east:e.bounds.northeast.lng,west:e.bounds.southwest.lng},options:{strokeColor:"#005edc",strokeOpacity:.8,strokeWeight:2,fillColor:"#005edc",fillOpacity:.35,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:1}}):""]}):"loading Map"})};n(252),n(253);R.a.use([z.a,B.a,U.a]);var G=Object(j.g)((function(e){var t=Object(c.useState)(void 0),n=Object(l.a)(t,2),i=n[0],o=n[1],r=Object(c.useState)(!1),u=Object(l.a)(r,2),O=u[0],m=u[1],p=Object(c.useState)(!1),g=Object(l.a)(p,2),N=g[0],S=g[1],w=Object(c.useState)(null),y=Object(l.a)(w,2),k=y[0],E=y[1],F=Object(c.useState)([]),I=Object(l.a)(F,2),P=I[0],A=I[1],M=Object(c.useState)(null),R=Object(l.a)(M,2),z=R[0],B=R[1];Object(c.useEffect)((function(){e.postLoaded&&e.postLoaded(k)}),[k,e]);if(Object(c.useEffect)((function(){e.location&&e.location.state&&e.location.state.post&&(E(e.location.state.post),S(!0)),e.location&&e.location.state&&e.location.state.postId?o(e.location.state.postId):e.match&&e.match.params&&e.match.params.postId?o(e.match.params.postId):m(!0)}),[e.location,e.match]),Object(c.useEffect)((function(){!k&&i&&function(e){return h.a.get(b.production.api+"/posts/one?id="+e)}(i).then((function(e){200===e.status?e.data&&(E(e.data),S(!0)):202===e.status&&console.error("error",e.data)})).catch((function(e){console.error(e)}))}),[i,k]),Object(c.useEffect)((function(){i&&e.user&&function(e){return h.a.get(b.production.api+"/annotation/all?id="+e,{withCredentials:!0,timeout:1e4})}(i).then((function(e){200===e.status?e.data&&A(e.data):202===e.status&&console.error("error",e.data)})).catch((function(e){console.error(e)}))}),[e.user,i]),Object(c.useEffect)((function(){if(k){var e=k.address;""===e&&(e=k.neighborhood.join(" ")),(t=e,h.a.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(t,"+SF,CA&key=AIzaSyCUt2G6KFrKTpKlUkbUrTIH0SqpgzRX8_0"))).then((function(e){e.data.results&&e.data.results.length&&e.data.results.length>0&&e.data.results[0]&&e.data.results[0].geometry&&e.data.results[0].geometry.location&&B(e.data.results[0].geometry.location)})).catch((function(e){console.log("Failed to get map data",e)}))}var t}),[k]),!0===O)return Object(a.jsx)(j.a,{to:"/"});return Object(a.jsx)("div",{className:"post",children:N?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("h1",{children:k.title}),Object(a.jsxs)("div",{className:"content",children:[Object(a.jsxs)("div",{className:"left",children:[Object(a.jsx)("div",{className:"gallery",children:Object(a.jsx)(H.a,{navigation:!0,spaceBetween:0,slidesPerView:1,onSwiper:function(e){return e.update()},children:k.images&&k.images.length&&k.images.length>0?k.images.map((function(e,t){return Object(a.jsx)(K.a,{style:{backgroundImage:"url(".concat(x(e,f),")")},children:" "},e)})):Object(a.jsx)(K.a,{children:" No images available "})})}),Object(a.jsx)("div",{className:"body",children:_()(k.body.replace(/(?:\r\n|\r|\n)/g,"<br>"))})]}),Object(a.jsxs)("div",{className:"right",children:[Object(a.jsx)("div",{className:"map",children:Object(a.jsx)(J,{circle:!0,center:z,zoom:""===k.address?14:17,circleRadius:""===k.address?400:100})}),Object(a.jsxs)("div",{className:"data",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Post date: "}),"  ",v(k.date)]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Bedrooms: "}),"  ",k.bedrooms," BR"]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Area: "}),"  ",k.area," ft\xb2"]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Neighborhood: "}),"  ",k.neighborhood.join(" ")]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Address: "}),"  ",""===k.address?"N/A":k.address]})]})]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Annotations"}),Object(a.jsx)("div",{className:"annotation",children:e.user?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("div",{className:"list",children:P&&P.length&&P.length>0?Object(a.jsx)(D,{annotations:P}):Object(a.jsx)("div",{children:" No annotations found for this post "})}),Object(a.jsx)(T,{success:function(e){A([].concat(Object(L.a)(P),[e]))},postId:k._id})]}):Object(a.jsxs)("div",{id:e.id,className:"login",children:["Please sign-in/sign-up to add a annotation.",Object(a.jsx)(d.b,{to:{pathname:"/login",state:{from:e.location}},children:"Go to sign-in/sign-up"})]})})]})]}):Object(a.jsx)(C.a,{type:"Puff",color:"#4f5d75;",height:100,width:100,className:"loader"})})})),$=n(54),W=n.n($),X=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],u=Object(c.useState)(void 0),O=Object(l.a)(u,2),m=O[0],p=O[1];return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{onClick:e.changeMode,className:"top-right-corner",children:"Sign-up"}),Object(a.jsx)("h1",{children:"Sign-in"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(a.jsx)("input",{id:"email",alt:"email",autoFocus:!0,name:"username",placeholder:"Enter your Email",type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(a.jsx)("input",{id:"password",alt:"password",name:"password",placeholder:"Enter your Password",type:"password",onChange:function(e){return t=e.target.value,j(W()(t).toString());var t}})]}),Object(a.jsx)("button",{"aria-label":"Sign into forum",onClick:function(){""!==s&&""!==d?function(e){return h.a.post(b.production.api+"/auth/signin",e,{withCredentials:!0,timeout:1e4})}({email:s,password:d}).then((function(t){console.log(t),t.message?p(t.message):e.success(t)})).catch((function(e){console.error(e)})):p("Please fill in all fields")},children:"Sign-in"}),Object(a.jsx)("div",{className:"error",children:m||""})]})},V=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],u=Object(c.useState)(void 0),O=Object(l.a)(u,2),m=O[0],p=O[1];return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{onClick:e.changeMode,className:"top-right-corner",children:"Sign-in"}),Object(a.jsx)("h1",{children:"Sign-up"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(a.jsx)("input",{id:"email",alt:"email",name:"username",placeholder:"Enter your Email",type:"text",onChange:function(e){return j(e.target.value)}})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(a.jsx)("input",{id:"password",alt:"password",name:"password",placeholder:"Enter your Password",type:"password",onChange:function(e){return t=e.target.value,i(W()(t).toString());var t}})]}),Object(a.jsx)("button",{"aria-label":"Sign up to forum",onClick:function(){""!==s&&""!==d?function(e){return h.a.post(b.production.api+"/auth/signup",e,{withCredentials:!0,timeout:1e4})}({email:d,password:s}).then((function(t){t.message?p(t.message):e.success(t)})).catch((function(e){console.error(e)})):p("Please fill in all fields")},children:"Sign-up"}),Object(a.jsx)("div",{className:"error",children:m||""})]})},Q=(n(345),Object(j.g)((function(e){var t=Object(c.useState)(!0),n=Object(l.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(!1),r=Object(l.a)(o,2),d=r[0],u=r[1],b=(e.location.state||{from:{pathname:"/"}}).from,O=function(t){e.loginSuccess(t),u(!0)},h=function(){i(!s)};return!0===d?Object(a.jsx)(j.a,{to:b}):Object(a.jsx)("div",{className:"auth-container",children:s?Object(a.jsx)(X,{changeMode:h,success:O}):Object(a.jsx)(V,{changeMode:h,success:O})})}))),Y=(n(346),Object(j.g)((function(e){return Object(a.jsxs)("header",{role:"banner",className:"active",id:"scroll-header",children:[Object(a.jsxs)("nav",{role:"navigation",className:"menu",children:[Object(a.jsx)(d.b,{"aria-label":"Craigslist",to:"/",children:"Craigslist"}),Object(a.jsx)(d.b,{"aria-label":"Navigate to Home page",to:"/",children:"Home"})]}),Object(a.jsx)("div",{className:"login",children:e.user?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"user",children:["Hello ",e.user.email]}),Object(a.jsx)("button",{onClick:e.logout,"aria-label":"Logout button",children:"Logout"})]}):Object(a.jsx)(d.b,{to:{pathname:"/login",state:{from:e.location}},children:"Sign-In/Sign-up"})})]})}))),Z=n(156),ee=(n(347),function(){var e=Object(c.useState)(0),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(0),o=Object(l.a)(i,2),r=o[0],d=o[1],j=Object(c.useState)(""),u=Object(l.a)(j,2),b=u[0],O=u[1],h=function(e){s(e.target.innerHeight)};return Object(c.useEffect)((function(){s(window.innerHeight),window.addEventListener("resize",h);var e=new ResizeObserver((function(e){var t,n=Object(Z.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value.contentRect;d(a.height+a.top)}}catch(c){n.e(c)}finally{n.f()}})),t=document.getElementById("craigslist-body");return e.observe(t),function(){window.removeEventListener("resize",h),e.unobserve(t)}}),[]),Object(c.useEffect)((function(){O(n>r?"bottom":"")}),[n,r]),Object(a.jsx)("footer",{role:"contentinfo",className:b,children:Object(a.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020, Emile Ferrand"})})}),te=(n(348),Object(j.g)((function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),i=n[0],o=n[1],r=Object(c.useState)(""),j=Object(l.a)(r,2),u=j[0],O=j[1],m=Object(c.useState)({}),p=Object(l.a)(m,2),f=p[0],x=p[1],g=Object(c.useState)(9),N=Object(l.a)(g,2),S=N[0],w=N[1],C=Object(c.useCallback)((function(e){var t=i.filter((function(t){return t.name===e}));t&&t.length>0?x(t[0]):y()}),[i]),y=function(){x({bounds:{northeast:{lat:37.9298239,lng:-122.28178},southwest:{lat:37.6398299,lng:-123.173825}},location:{lat:37.7749295,lng:-122.4194155},viewport:{northeast:{lat:37.812,lng:-122.3482},southwest:{lat:37.70339999999999,lng:-122.527}}})};return Object(c.useEffect)((function(){if(e.post&&e.post.neighborhood){var t=e.post.neighborhood.join(" ");C(t),O(t)}else""===u?y():C(u)}),[u,i,e.post,C]),Object(c.useEffect)((function(){if(f.viewport){var e=f.viewport.southwest.lng,t=f.viewport.northeast.lng-e;t<0&&(t+=360),w(Math.round(Math.log(36e3/t/256)/Math.LN2))}}),[f]),Object(c.useEffect)((function(){h.a.get(b.production.api+"/location/all").then((function(e){e.data&&o(e.data)})).catch((function(e){console.log("Request to get locations failed",e)}))}),[]),Object(c.useEffect)((function(){e.setFilter&&e.setFilter(u)}),[u,e]),Object(c.useEffect)((function(){null===e.post&&O("")}),[e.post]),Object(a.jsxs)("div",{className:"aside",children:[Object(a.jsxs)("div",{className:"date",children:[Object(a.jsx)("div",{children:v(Date.now()).split(" ")[0]}),Object(a.jsx)("div",{children:v(Date.now()).split(" ")[1]})]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{className:"location",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"San Francisco"}),Object(a.jsx)("div",{children:"US, CA"})]}),Object(a.jsx)("div",{className:"image"})]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{className:"location-picker",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("select",{"aria-label":"Option menu for neighborhood filter",disabled:e.post?"disabled":"",value:u,onChange:function(e){return O(e.target.value)},name:"location",children:[Object(a.jsx)("option",{value:"",children:"All"}),i&&i.length>0?i.map((function(e,t){return Object(a.jsx)("option",{value:e.name,children:e.name},t)})):""]})}),Object(a.jsx)("div",{className:"map",children:Object(a.jsx)(J,{rectangle:!0,center:f.location,zoom:S,bounds:f.viewport})})]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{className:"current",children:[Object(a.jsx)("div",{children:"Lists"}),Object(a.jsx)("div",{alt:"Arrow down","aria-label":"Arrow down",className:"arrow",children:"\u2193"}),Object(a.jsx)("div",{children:"housing"}),Object(a.jsx)("div",{alt:"Arrow down","aria-label":"Arrow down",className:"arrow",children:"\u2193"}),Object(a.jsx)("div",{children:e.post&&e.post.title?Object(a.jsx)(d.b,{className:"back",to:"/",children:"apartments housing for rent"}):Object(a.jsx)("h1",{children:"apartments housing for rent"})}),e.post&&e.post.title?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("div",{alt:"Arrow down","aria-label":"Arrow down",className:"arrow",children:"\u2193"}),Object(a.jsx)("div",{children:e.post.title})]}):""]})]})}))),ne=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(null),o=Object(l.a)(i,2),r=o[0],u=o[1],O=Object(c.useState)(null),p=Object(l.a)(O,2),f=p[0],x=p[1];return Object(c.useEffect)((function(){h()(b.production.api+"/auth/signin",{method:"get",withCredentials:!0,timeout:1e4}).then((function(e){e.data&&s(e.data)})).catch((function(e){console.log("Request to login failed",e)}))}),[]),Object(a.jsx)(m.c,{googleMapsApiKey:"AIzaSyCUt2G6KFrKTpKlUkbUrTIH0SqpgzRX8_0",children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(Y,{logout:function(){h.a.post(b.production.api+"/auth/signout",{withCredentials:!0,timeout:1e4}).then((function(e){e.data&&!0===e.data&&s(null)})).catch((function(e){console.log("Request to logout failed",e)}))},user:n}),Object(a.jsx)("div",{role:"main",id:"craigslist-body",className:"craigslist-body",children:Object(a.jsxs)(j.d,{children:[Object(a.jsxs)(j.b,{exact:!0,path:"/",children:[Object(a.jsx)(te,{setFilter:x,post:r}),Object(a.jsx)(P,{neighborhood:f,postLoaded:u})]}),Object(a.jsxs)(j.b,{path:"/post/:postId",children:[Object(a.jsx)(te,{setFilter:x,post:r}),Object(a.jsx)(G,{postLoaded:u,user:n})]}),Object(a.jsx)(j.b,{path:"/login",children:Object(a.jsx)(Q,{loginSuccess:function(e){s(e)}})}),Object(a.jsx)(j.b,{path:"*",component:A})]})}),Object(a.jsx)(ee,{})]})})};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(ne,{})}),document.getElementById("root")),r()}},[[349,1,2]]]);
//# sourceMappingURL=main.bcf15933.chunk.js.map